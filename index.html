<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Revive by Lize — Massage Therapy</title>
<meta name="description" content="Massage therapy for healing, renewal, and radiant relaxation in the Bay Area. Gentle Recovery Flow, Total Body Renewal, Radiance Facial Flow.">
<style>
  :root{--bg:#fbfbfb;--ink:#1f2937;--muted:#6b7280;--accent:#5fa08e;--accent-2:#cfe3dc;--card:#ffffff;--ok:#16a34a;--no:#ef4444}
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;color:var(--ink);background:var(--bg);line-height:1.6}
  img{max-width:100%;display:block}
  .container{max-width:1120px;margin:0 auto;padding:0 20px}
  section{padding:72px 20px}
  h1,h2{margin:0 0 14px}
  h1{font-size:44px;line-height:1.15}
  h2{font-size:28px}
  .sub{color:var(--muted)}
  .card{background:var(--card);border:1px solid #e5e7eb;border-radius:14px;padding:18px;box-shadow:0 6px 16px rgba(0,0,0,.05)}
  .row{display:flex;align-items:center;justify-content:space-between;gap:16px}

  /* Header */
  .topbar{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid #e5e7eb;backdrop-filter:saturate(180%) blur(8px)}
  .brand{font-weight:800;letter-spacing:.3px;padding:16px 0}
  nav{display:flex;gap:12px;flex-wrap:wrap}
  nav a{color:var(--ink);text-decoration:none;font-weight:500;padding:10px 12px;border-radius:999px}
  nav a:hover{background:#f3f4f6}
  nav a.cta{background:var(--accent);color:#fff;padding:10px 16px}

  /* Hero */
  .hero{background:linear-gradient(135deg,var(--accent-2),#f0f5f3)}
  .hero-inner{display:grid;grid-template-columns:1.15fr 1fr;gap:32px;padding:86px 20px}
  .hero p{color:var(--muted);font-size:18px;margin:0 0 24px}
  .btn{display:inline-block;text-decoration:none;font-weight:600;padding:12px 18px;border-radius:999px}
  .btn.primary{background:var(--accent);color:#fff}
  .btn.secondary{background:#fff;color:var(--ink);border:1px solid #e5e7eb}
  .hero-visual{border-radius:18px;min-height:320px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.08);background:#ddd}
  .hero-visual img{width:100%;height:100%;object-fit:cover}

  /* Services */
  .services{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:16px}
  @media(max-width:980px){.hero-inner{grid-template-columns:1fr}.services{grid-template-columns:1fr}}
  .card h3{margin:0 0 6px;font-size:18px}
  .visual{height:180px;border-radius:12px;margin-bottom:12px;overflow:hidden;background:#eee}
  .visual img{width:100%;height:100%;object-fit:cover}
  .price{font-weight:700;margin-top:8px}

  /* About */
  .about{display:grid;grid-template-columns:1fr 1.15fr;gap:24px;margin-top:18px}
  @media(max-width:980px){.about{grid-template-columns:1fr}}
  .about-visual{border-radius:14px;min-height:280px;overflow:hidden;background:#f1f5f9}

  /* Booking calendar */
  .calendar{display:grid;gap:12px}
  .cal-head{display:flex;justify-content:space-between;align-items:center}
  .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
  .dow{font-size:12px;color:#6b7280;text-align:center}
  .day{padding:12px;border-radius:10px;text-align:center;border:1px solid #e5e7eb;background:#fff;cursor:pointer;user-select:none}
  .day.muted{color:#9ca3af;background:#f9fafb}
  .day.ok{border-color:#86efac;background:#ecfdf5}
  .day.no{border-color:#fecaca;background:#fff1f2}
  .day.selected{outline:3px solid #5fa08e}
  .cal-legend{display:flex;gap:10px;align-items:center;font-size:12px;color:#6b7280;margin-top:8px}
  .chip{display:inline-block;width:12px;height:12px;border-radius:3px;margin-right:6px}
  .chip.ok{background:#22c55e}
  .chip.no{background:#ef4444}

  /* Footer */
  footer{background:#fff;border-top:1px solid #e5e7eb;color:#4b5563;margin-top:40px}
  .footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:18px;padding:22px 0}
  @media(max-width:980px){.footer-grid{grid-template-columns:1fr}}
  .small{font-size:13px;color:#6b7280}
  .credits{border-top:1px solid #e5e7eb;margin-top:24px;padding:16px 0;font-size:12px;text-align:center}
</style>
</head>
<body>
<header class="topbar">
  <div class="container row">
    <div class="brand">Revive by Lize</div>
    <nav>
      <a href="#services">Services</a>
      <a href="#about">About</a>
      <a href="#booking">Book</a>
      <a href="#contact">Contact</a>
      <a class="cta" href="mailto:contact@revivebylize.com">Email</a>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container hero-inner">
    <div>
      <h1>Healing hands. Restoring balance.</h1>
      <p>Massage therapy crafted with care for recovery, renewal, and radiant relaxation.</p>
      <a class="btn primary" href="#booking">Book an Appointment</a>
      <a class="btn secondary" href="#services">See Services</a>
    </div>
    <div class="hero-visual">
      <!-- Optional hero image: <img src="hero.jpg" alt="Massage ambiance"> -->
    </div>
  </div>
</section>

<section id="services" class="container">
  <h2>Services</h2>
  <div class="sub">Fair, accessible pricing — quality care without $100/hour price tags.</div>
  <div class="services">
    <div class="card">
      <div class="visual"><img src="GRF.png" alt="Gentle Recovery Flow"></div>
      <h3>Gentle Recovery Flow</h3>
      <div class="price">$75 • 60 min</div>
      <p>A light, careful touch designed to support your body’s natural healing after surgery. Slow, fluid strokes help reduce swelling, ease tension, and encourage circulation.</p>
    </div>

    <div class="card">
      <div class="visual"><img src="TBR.png" alt="Total Body Renewal"></div>
      <h3>Total Body Renewal</h3>
      <div class="price">$70 • 60 min</div>
      <p>A full‑body, calming treatment to help you feel lighter, more energized, and balanced. Gentle pressure encourages healthy fluid movement and deep relaxation.</p>
    </div>

    <div class="card">
      <div class="visual"><img src="RFF.png" alt="Radiance Facial Flow"></div>
      <h3>Radiance Facial Flow</h3>
      <div class="price">$55 • 45 min</div>
      <p>A soothing facial massage designed to refresh your skin and release tension. Rhythmic motions reduce puffiness, improve tone, and leave skin vibrant.</p>
    </div>
  </div>
</section>

<section id="about" class="container">
  <h2>About Lize</h2>
  <div class="about">
    <div class="about-visual">
      <!-- Add your mom's photo later: <img src="about.jpg" alt="About Lize"> -->
    </div>
    <div>
      <p>Lize, a CNA with years of caregiving experience, is now following her passion for massage therapy. She blends skill and empathy to provide safe, restorative sessions tailored to each client’s needs.</p>
      <p>Her goal is simple: help you feel revived — whether recovering from surgery, managing daily stress, or seeking radiant relaxation.</p>
    </div>
  </div>
</section>

<section id="booking" class="container">
  <h2>Book an Appointment</h2>
  <div class="sub">Pick a date, choose a time, select a service, and enter your email. You’ll get a confirmation instantly.</div>

  <div class="card" style="margin-top:14px">
    <div id="calendar" class="calendar"></div>

    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px">
      <label>Time
        <select id="time" style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
          <option value="">Select a time</option>
        </select>
      </label>
      <label>Service
        <select id="service" style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
          <option value="Gentle Recovery Flow (60 min)">$75 — Gentle Recovery Flow (60 min)</option>
          <option value="Total Body Renewal (60 min)">$70 — Total Body Renewal (60 min)</option>
          <option value="Radiance Facial Flow (45 min)">$55 — Radiance Facial Flow (45 min)</option>
        </select>
      </label>
      <label>Contact Email
        <input id="clientEmail" type="email" placeholder="you@example.com" style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
      </label>
    </div>

    <div style="margin-top:12px">
      <button id="requestBtn" class="btn primary">Request Booking</button>
      <span id="reqMsg" class="small" style="margin-left:10px;color:#6b7280"></span>
    </div>

    <div class="cal-legend">
      <span><span class="chip ok"></span>Available</span>
      <span><span class="chip no"></span>Unavailable</span>
    </div>
  </div>
</section>

<section id="contact" class="container">
  <h2>Contact & Location</h2>
  <div class="card">
    <p><strong>Email:</strong> <a href="mailto:contact@revivebylize.com">contact@revivebylize.com</a></p>
    <p><strong>Hours:</strong> Evenings & Weekends • By appointment</p>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <a class="btn secondary" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=Revive+by+Lize+San+Jose">Open in Google Maps</a>
      <a class="btn secondary" target="_blank" rel="noopener" href="http://maps.apple.com/?q=Revive+by+Lize+San+Jose">Open in Apple Maps</a>
    </div>
  </div>
</section>

<footer>
  <div class="container">
    <div class="footer-grid">
      <div>
        <div class="name" style="font-weight:700">Revive by Lize</div>
        <div class="small">Massage therapy for healing, renewal, and radiant relaxation.</div>
      </div>
      <div>
        <div class="small"><strong>Quick links</strong></div>
        <div class="small"><a href="#services">Services</a> · <a href="#about">About</a> · <a href="#booking">Book</a> · <a href="#contact">Contact</a></div>
      </div>
      <div>
        <div class="small"><strong>Payments</strong></div>
        <div class="small">Zelle • Cash (in person)</div>
      </div>
    </div>
    <div class="credits">© <span id="year"></span> Revive by Lize</div>
  </div>
</footer>

<script>
// ==== Footer year (safe) ====
const yearEl = document.getElementById('year');
if (yearEl) yearEl.textContent = new Date().getFullYear();

// ==== Booking: custom calendar + API calls ====
const SERVICE_LABELS = [
  "Gentle Recovery Flow (60 min)",
  "Total Body Renewal (60 min)",
  "Radiance Facial Flow (45 min)"
];

const calEl   = document.getElementById('calendar');
const timeSel = document.getElementById('time');
const svcSel  = document.getElementById('service');
const reqBtn  = document.getElementById('requestBtn');
const reqMsg  = document.getElementById('reqMsg');
const emailEl = document.getElementById('clientEmail');

if (calEl && timeSel && svcSel && reqBtn && reqMsg) {
  let view = new Date();
  let selectedDateISO = null;

  const ymd = d => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;

  function renderCalendar(){
    calEl.innerHTML = "";

    const head = document.createElement('div');
    head.className = "cal-head";
    head.innerHTML = `
      <button class="btn secondary" id="prev">&larr;</button>
      <div style="font-weight:700">${view.toLocaleString('default',{month:'long',year:'numeric'})}</div>
      <button class="btn secondary" id="next">&rarr;</button>
    `;
    calEl.appendChild(head);

    const labels = document.createElement('div');
    labels.className = "cal-grid";
    ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(txt=>{
      const el = document.createElement('div'); el.className = "dow"; el.textContent = txt; labels.appendChild(el);
    });
    calEl.appendChild(labels);

    const grid = document.createElement('div');
    grid.className = "cal-grid";

    const first = new Date(view.getFullYear(), view.getMonth(), 1);
    const startIdx = first.getDay();
    const daysInMonth = new Date(view.getFullYear(), view.getMonth()+1, 0).getDate();

    for(let i=0;i<startIdx;i++){ const b=document.createElement('div'); b.className="day muted"; grid.appendChild(b); }

    for(let d=1; d<=daysInMonth; d++){
      const date = new Date(view.getFullYear(), view.getMonth(), d);
      const today = new Date(new Date().toDateString());
      const future = date >= today;

      const el = document.createElement('div');
      el.className = "day " + (future ? "ok" : "no");
      el.textContent = d;

      if (future){
        el.addEventListener('click', async ()=>{
          [...grid.querySelectorAll('.day')].forEach(x=>x.classList.remove('selected'));
          el.classList.add('selected');
          selectedDateISO = ymd(date);
          await loadTimesFor(selectedDateISO);
        });
      } else {
        el.style.cursor = "not-allowed";
      }

      grid.appendChild(el);
    }

    calEl.appendChild(grid);
    document.getElementById('prev').onclick = ()=>{ view.setMonth(view.getMonth()-1); renderCalendar(); };
    document.getElementById('next').onclick = ()=>{ view.setMonth(view.getMonth()+1); renderCalendar(); };
  }

  async function loadTimesFor(dateISO){
    if (!SERVICE_LABELS.includes(svcSel.value)) svcSel.value = SERVICE_LABELS[0];
    timeSel.innerHTML = '<option value="">Loading…</option>';
    try{
      const url = `/api/freebusy?date=${encodeURIComponent(dateISO)}&service=${encodeURIComponent(svcSel.value)}`;
      const r = await fetch(url);
      const data = await r.json();
      const slots = Array.isArray(data.slots) ? data.slots : [];

      timeSel.innerHTML = '<option value="">Select a time</option>';
      if (!slots.length){
        const o = document.createElement('option');
        o.value = ""; o.textContent = "No times available";
        timeSel.appendChild(o);
        return;
      }
      slots.forEach(iso=>{
        const t = new Date(iso).toLocaleTimeString([], {hour:'numeric', minute:'2-digit'});
        const o = document.createElement('option'); o.value = iso; o.textContent = t; timeSel.appendChild(o);
      });
    }catch(err){
      timeSel.innerHTML = '<option value="">Error loading times</option>';
      console.error('freebusy error', err);
    }
  }

  svcSel.addEventListener('change', ()=>{ if (selectedDateISO) loadTimesFor(selectedDateISO); });

  reqBtn.addEventListener('click', async ()=>{
    reqMsg.textContent = "";
    const isoStart = timeSel.value;
    const service  = svcSel.value;
    const email    = (emailEl.value || "").trim();

    if (!selectedDateISO){ reqMsg.textContent = "Please pick a date."; return; }
    if (!isoStart){ reqMsg.textContent = "Please pick a time."; return; }
    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ reqMsg.textContent = "Enter a valid email."; return; }

    reqBtn.disabled = true; const old = reqBtn.textContent; reqBtn.textContent = "Booking…";

    try{
      const r = await fetch('/api/book',{
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ isoStart, service, email })
      });
      const data = await r.json();
      if (data && data.ok){
        reqMsg.style.color = "#16a34a";
        reqMsg.textContent = "Booked! A confirmation email was sent to you.";
      } else {
        reqMsg.style.color = "#ef4444";
        reqMsg.textContent = "Booking failed. Please try again.";
      }
    }catch(err){
      reqMsg.style.color = "#ef4444";
      reqMsg.textContent = "Network error. Please try again.";
      console.error('book error', err);
    }finally{
      reqBtn.disabled = false; reqBtn.textContent = old;
    }
  });

  // go!
  renderCalendar();
} else {
  console.warn('Booking elements not found; calendar not initialized.');
}
</script>
</body>
</html>
